<!DOCTYPE html>
<html>
<head>
    <title>üõí Product Inventory System</title>
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #667eea 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(20px);
            border-radius: 30px; 
            box-shadow: 
                0 25px 50px rgba(0,0,0,0.25),
                0 0 0 1px rgba(255,255,255,0.1);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .header { 
            background: linear-gradient(135deg, #ff6b6b, #feca57, #ff9ff3);
            color: white; 
            padding: 50px 40px; 
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(-10px) rotate(240deg); }
        }

        h1 { 
            font-size: 3.5em; 
            font-weight: 800; 
            margin-bottom: 15px; 
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .subtitle { 
            font-size: 1.3em; 
            opacity: 0.95; 
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); 
            gap: 30px; 
            padding: 50px 40px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .stat-card { 
            background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(248,250,252,0.8));
            padding: 35px 25px; 
            border-radius: 25px; 
            text-align: center; 
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255,255,255,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24);
        }
        
        .stat-card:hover { 
            transform: translateY(-12px) scale(1.02); 
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }
        
        .stat-number { 
            font-size: 3.5em; 
            font-weight: 900; 
            background: linear-gradient(45deg, #2c3e50, #34495e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            line-height: 1;
        }
        
        .stat-label { 
            color: #64748b; 
            font-size: 1.2em; 
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .total-value { 
            background: linear-gradient(45deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .content { padding: 50px 40px; }
        
        .controls { 
            display: grid; 
            grid-template-columns: 1fr auto 1fr; 
            gap: 30px; 
            margin-bottom: 40px; 
            align-items: end;
        }
        
        .form-section, .search-section { 
            background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(248,250,252,0.8));
            padding: 40px; 
            border-radius: 25px; 
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.08),
                inset 0 1px 0 rgba(255,255,255,1);
            border: 1px solid rgba(255,255,255,0.4);
            backdrop-filter: blur(10px);
        }
        
        .form-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
            gap: 25px; 
            margin-bottom: 30px;
        }
        
        .form-group { 
            display: flex; 
            flex-direction: column; 
        }
        
        label { 
            font-weight: 700; 
            color: #1e293b; 
            margin-bottom: 12px; 
            font-size: 15px;
            letter-spacing: 0.3px;
        }
        
        input, select { 
            padding: 18px 20px; 
            border: 2px solid #e2e8f0; 
            border-radius: 16px; 
            font-size: 16px; 
            font-weight: 500;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        input:focus, select:focus { 
            outline: none; 
            border-color: #3b82f6; 
            box-shadow: 
                0 0 0 4px rgba(59,130,246,0.15),
                0 8px 25px rgba(59,130,246,0.2);
            transform: translateY(-2px);
        }
        
        input::placeholder {
            color: #94a3b8;
            font-weight: 400;
        }

        .btn { 
            padding: 18px 35px; 
            border: none; 
            border-radius: 16px; 
            font-size: 16px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 8px 5px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .btn-primary { 
            background: linear-gradient(45deg, #3b82f6, #1d4ed8); 
            color: white; 
        }
        .btn-success { 
            background: linear-gradient(45deg, #10b981, #059669); 
            color: white; 
        }
        .btn-danger { 
            background: linear-gradient(45deg, #ef4444, #dc2626); 
            color: white; 
        }
        .btn-warning { 
            background: linear-gradient(45deg, #f59e0b, #d97706); 
            color: white; 
        }
        
        .btn:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.25);
        }
        
        .btn:active { 
            transform: translateY(-2px); 
        }
        
        table { 
            width: 100%; 
            border-collapse: separate; 
            border-spacing: 0;
            background: rgba(255,255,255,0.95);
            border-radius: 25px; 
            overflow: hidden; 
            box-shadow: 
                0 25px 50px rgba(0,0,0,0.15),
                0 0 0 1px rgba(255,255,255,0.3);
            margin-top: 20px;
        }
        
        th { 
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%); 
            color: white; 
            padding: 25px 30px; 
            text-align: left; 
            font-weight: 700;
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        td { 
            padding: 25px 30px; 
            border-bottom: 1px solid rgba(226,232,240,0.8);
            transition: all 0.3s ease;
        }
        
        tr:hover { 
            background: linear-gradient(90deg, rgba(59,130,246,0.08), rgba(16,185,129,0.08));
            transform: scale(1.01);
        }
        
        .low-stock { 
            background: linear-gradient(45deg, #fef3c7, #fde68a) !important; 
            color: #92400e; 
            animation: pulse 2s infinite;
        }
        
        .out-of-stock { 
            background: linear-gradient(45deg, #fecaca, #fca5a5) !important; 
            color: #991b1b;
            animation: shake 0.5s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .stock-badge { 
            padding: 10px 20px; 
            border-radius: 25px; 
            font-weight: 700; 
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .stock-high { 
            background: linear-gradient(45deg, #d1fae5, #a7f3d0); 
            color: #065f46; 
        }
        .stock-low { 
            background: linear-gradient(45deg, #fef3c7, #fde68a); 
            color: #92400e; 
        }
        .stock-out { 
            background: linear-gradient(45deg, #fecaca, #fca5a5); 
            color: #991b1b; 
        }
        
        .price { 
            font-weight: 800; 
            font-size: 1.2em; 
            background: linear-gradient(45deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .rupees { 
            font-size: 0.8em; 
            margin-left: 2px;
        }

        .message { 
            padding: 25px 35px; 
            margin: 30px 0; 
            border-radius: 20px; 
            font-weight: 700; 
            text-align: center;
            font-size: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid;
        }
        
        .success { 
            background: linear-gradient(135deg, #d1fae5, #a7f3d0); 
            color: #065f46; 
            border-color: #10b981;
        }
        .error { 
            background: linear-gradient(135deg, #fecaca, #fca5a5); 
            color: #991b1b; 
            border-color: #ef4444;
            animation: shake 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideIn { 
            from { 
                opacity: 0; 
                transform: translateY(-40px) scale(0.95); 
            }
        }
        
        .no-results { 
            text-align: center; 
            padding: 80px 40px; 
            color: #94a3b8; 
            font-size: 1.4em; 
            background: rgba(255,255,255,0.5);
        }
        
        .actions { 
            display: flex; 
            gap: 12px; 
        }
        
        h3 {
            color: #1e293b;
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        #formTitle {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõí Product Inventory</h1>
            <p class="subtitle">Advanced JSON Management ‚Ä¢ Real-time Analytics</p>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalProducts">0</div>
                <div class="stat-label">Total Products</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalValue">‚Çπ0</div>
                <div class="stat-label total-value">Inventory Value</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="lowStock">0</div>
                <div class="stat-label">Low Stock Alerts</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="outOfStock">0</div>
                <div class="stat-label">Out of Stock</div>
            </div>
        </div>

        <!-- Messages -->
        <div id="message"></div>

        <!-- Controls -->
        <div class="controls">
            <div class="search-section">
                <h3>üîç Search Products</h3>
                <div style="display: flex; gap: 20px;">
                    <select id="searchCategory" onchange="filterProducts()">
                        <option value="">All Categories</option>
                        <option value="Electronics">üì± Electronics</option>
                        <option value="Clothing">üëï Clothing</option>
                        <option value="Books">üìö Books</option>
                        <option value="Home">üè† Home & Garden</option>
                        <option value="Sports">‚öΩ Sports</option>
                    </select>
                    <button class="btn btn-primary" onclick="clearFilter()">üóëÔ∏è Clear</button>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="btn btn-success" onclick="loadInventory()">üîÑ Load JSON</button>
                <button class="btn btn-danger" onclick="exportJSON()">üì• Export</button>
            </div>
        </div>

        <!-- Product Form -->
        <div class="form-section">
            <h3 id="formTitle">‚ûï Add New Product</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Product ID:</label>
                    <input type="number" id="productId" required min="1" placeholder="Unique ID">
                </div>
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="productName" required placeholder="Product name">
                </div>
                <div class="form-group">
                    <label>Category:</label>
                    <select id="productCategory" required>
                        <option value="">Select Category</option>
                        <option value="Electronics">üì± Electronics</option>
                        <option value="Clothing">üëï Clothing</option>
                        <option value="Books">üìö Books</option>
                        <option value="Home">üè† Home & Garden</option>
                        <option value="Sports">‚öΩ Sports</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Price (‚Çπ):</label>
                    <input type="number" id="productPrice" required min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label>Stock:</label>
                    <input type="number" id="productStock" required min="0" placeholder="Quantity">
                </div>
            </div>
            <div>
                <button class="btn btn-success" onclick="saveProduct()">üíæ Save Product</button>
                <button class="btn btn-warning" onclick="clearForm()">üóëÔ∏è Clear Form</button>
            </div>
        </div>

        <!-- Products Table -->
        <h3>üì¶ Live Inventory</h3>
        <table id="productsTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Product</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Value</th>
                    <th style="width: 220px;">Actions</th>
                </tr>
            </thead>
            <tbody id="productsTableBody">
                <tr><td colspan="7" style="text-align:center; padding:80px; color:#94a3b8;">Loading inventory... üõí</td></tr>
            </tbody>
        </table>
    </div>

    <!-- Same JavaScript with ‚Çπ changes -->
    <script>
        let productsData = [];
        let filteredData = [];
        let isEditing = false;
        let editingId = null;

        document.addEventListener('DOMContentLoaded', loadInventory);

        function showMessage(message, type = 'success') {
            const msgDiv = document.getElementById('message');
            msgDiv.innerHTML = `<div class="message ${type}">${message}</div>`;
            setTimeout(() => msgDiv.innerHTML = '', 4000);
        }

        async function loadInventory() {
            try {
                const response = await fetch('inventory.json');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const data = await response.json();
                productsData = Array.isArray(data) ? data : data.products || [];
                filteredData = [...productsData];
                
                displayProducts();
                updateStats();
                showMessage(`‚úÖ Loaded ${productsData.length} products!`, 'success');
                
            } catch (error) {
                console.error('JSON Error:', error);
                productsData = [];
                filteredData = [];
                displayProducts();
                updateStats();
                showMessage('Start adding products!', 'success');
            }
        }

        function displayProducts() {
            const tbody = document.getElementById('productsTableBody');
            const dataToShow = filteredData.length > 0 ? filteredData : productsData;
            
            if (dataToShow.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="no-results">No products found üõí</td></tr>';
                return;
            }
            
            tbody.innerHTML = '';
            dataToShow.forEach(product => {
                const row = createProductRow(product);
                tbody.appendChild(row);
            });
        }

        function createProductRow(product) {
            const row = document.createElement('tr');
            const stockStatus = getStockStatus(product.stock);
            const stockClass = `stock-${stockStatus}`;
            const itemValue = formatRupees(product.price * product.stock);
            
            row.innerHTML = `
                <td><strong>${product.id}</strong></td>
                <td>${product.name}</td>
                <td>${product.category}</td>
                <td><span class="price">‚Çπ${parseFloat(product.price).toLocaleString('en-IN', {minimumFractionDigits: 2})}</span></td>
                <td><span class="stock-badge ${stockClass}">${product.stock}</span></td>
                <td>${itemValue}</td>
                <td class="actions">
                    <button class="btn btn-warning" onclick="editProduct('${product.id}')">‚úèÔ∏è Edit</button>
                    <button class="btn btn-danger" onclick="deleteProduct('${product.id}')">üóëÔ∏è Delete</button>
                </td>
            `;
            return row;
        }

        function getStockStatus(stock) {
            const numStock = parseInt(stock);
            if (numStock === 0) return 'out';
            if (numStock <= 5) return 'low';
            return 'high';
        }

        function formatRupees(amount) {
            return '‚Çπ' + amount.toLocaleString('en-IN', { 
                minimumFractionDigits: 2, 
                maximumFractionDigits: 2 
            });
        }

        function validateProduct(id, name, category, price, stock) {
            if (!id || id <= 0) return 'ID must be positive';
            if (!name || name.trim().length < 2) return 'Name too short';
            if (!category) return 'Select category';
            if (!price || price <= 0) return 'Price must be > 0';
            if (!stock || stock < 0) return 'Stock cannot be negative';
            
            if (!isEditing && productsData.find(p => p.id == id)) {
                return 'ID must be unique!';
            }
            return null;
        }

        function saveProduct() {
            const id = document.getElementById('productId').value;
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const stock = parseInt(document.getElementById('productStock').value);

            const error = validateProduct(id, name, category, price, stock);
            if (error) {
                showMessage(error, 'error');
                return;
            }

            const product = { id, name, category, price, stock };

            if (isEditing && editingId == id) {
                const index = productsData.findIndex(p => p.id == id);
                productsData[index] = product;
                showMessage('‚úÖ Product updated!', 'success');
            } else {
                productsData.push(product);
                showMessage('‚úÖ Product added!', 'success');
            }

            filteredData = [...productsData];
            displayProducts();
            updateStats();
            clearForm();
        }

        function editProduct(id) {
            const product = productsData.find(p => p.id == id);
            if (!product) return;

            document.getElementById('productId').value = product.id;
            document.getElementById('productName').value = product.name;
            document.getElementById('productCategory').value = product.category;
            document.getElementById('productPrice').value = product.price;
            document.getElementById('productStock').value = product.stock;
            
            document.getElementById('formTitle').textContent = `‚úèÔ∏è Edit Product (ID: ${id})`;
            document.getElementById('productId').disabled = true;
            isEditing = true;
            editingId = id;
        }

        function deleteProduct(id) {
            if (!confirm(`Delete ${productsData.find(p => p.id == id)?.name || ''}?`)) return;
            
            productsData = productsData.filter(p => p.id != id);
            filteredData = [...productsData];
            displayProducts();
            updateStats();
            showMessage('‚úÖ Product removed!', 'success');
        }

        function filterProducts() {
            const category = document.getElementById('searchCategory').value;
            if (!category) {
                filteredData = [...productsData];
            } else {
                filteredData = productsData.filter(p => p.category === category);
            }
            displayProducts();
            updateStats();
        }

        function clearFilter() {
            document.getElementById('searchCategory').value = '';
            filteredData = [...productsData];
            displayProducts();
            updateStats();
        }

        function updateStats() {
            const dataToUse = filteredData.length > 0 ? filteredData : productsData;
            const totalProducts = dataToUse.length;
            const totalValue = dataToUse.reduce((sum, p) => sum + (p.price * p.stock), 0);
            const lowStock = dataToUse.filter(p => parseInt(p.stock) > 0 && parseInt(p.stock) <= 5).length;
            const outOfStock = dataToUse.filter(p => parseInt(p.stock) === 0).length;

            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalValue').textContent = formatRupees(totalValue);
            document.getElementById('lowStock').textContent = lowStock;
            document.getElementById('outOfStock').textContent = outOfStock;
        }

        function clearForm() {
            document.getElementById('productId').value = '';
            document.getElementById('productName').value = '';
            document.getElementById('productCategory').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productStock').value = '';
            document.getElementById('productId').disabled = false;
            document.getElementById('formTitle').textContent = '‚ûï Add New Product';
            isEditing = false;
            editingId = null;
        }

        function exportJSON() {
            const jsonData = { products: productsData };
            const jsonString = JSON.stringify(jsonData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'inventory.json';
            a.click();
            URL.revokeObjectURL(url);
            showMessage('üì• Inventory exported!', 'success');
        }
    </script>
</body>
</html>
