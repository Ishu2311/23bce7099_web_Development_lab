<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Task Manager + Persistence</title>
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f8fafc;
            --todo: #fef3c7;
            --progress: #dbeafe;
            --done: #d1fae5;
        }

        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); padding: 40px 20px; margin: 0; }
        
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { text-align: center; color: #1e293b; margin-bottom: 30px; }

        .input-section { 
            display: flex; justify-content: center; gap: 10px; margin-bottom: 40px; 
            background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        
        input { padding: 12px; width: 300px; border: 2px solid #e2e8f0; border-radius: 8px; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--primary); }
        
        button#addBtn { padding: 12px 24px; cursor: pointer; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; }

        .board { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        .column { 
            background: #f1f5f9; min-height: 500px; border-radius: 12px; padding: 20px; 
            border: 2px solid transparent; transition: 0.3s;
        }
        .column h3 { margin-top: 0; color: #475569; border-bottom: 2px solid #cbd5e1; padding-bottom: 10px; }
        .column.drag-over { border: 2px dashed var(--primary); background: #e2e8f0; }

        .task-card { 
            background: white; padding: 16px; margin-bottom: 12px; border-radius: 10px; 
            cursor: grab; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); position: relative;
            transition: transform 0.2s; border-left: 5px solid #64748b;
        }
        .task-card:active { cursor: grabbing; transform: scale(0.98); }
        
        .delete-btn { 
            position: absolute; top: 10px; right: 10px; background: none; border: none; 
            color: #ef4444; cursor: pointer; font-size: 18px; font-weight: bold;
        }

        .task-date { font-size: 12px; color: #94a3b8; margin-top: 8px; }
        .completed-msg { color: #059669; font-weight: bold; font-size: 12px; display: none; margin-top: 8px; }

        /* Status Styles */
        #todo .task-card { border-left-color: #f59e0b; }
        #inprogress .task-card { border-left-color: #3b82f6; }
        #completed .task-card { border-left-color: #10b981; background-color: var(--done); }
    </style>
</head>
<body>

<div class="container">
    <h1>Mini task board </h1>

    <div class="input-section">
        <input type="text" id="taskInput" placeholder="Enter a new task...">
        <button id="addBtn" onclick="addTask()">Add Task</button>
    </div>

    <div class="board">
        <div class="column" id="todo" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearStyles(event)">
            <h3>üìã To Do</h3>
        </div>
        <div class="column" id="inprogress" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearStyles(event)">
            <h3>‚è≥ In Progress</h3>
        </div>
        <div class="column" id="completed" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearStyles(event)">
            <h3>‚úÖ Completed</h3>
        </div>
    </div>
</div>

<script>
    // Initialize board from LocalStorage
    window.onload = loadTasks;

    function addTask() {
        const input = document.getElementById('taskInput');
        if (input.value.trim() === "") return;

        const taskData = {
            id: "task-" + Date.now(),
            name: input.value,
            date: new Date().toLocaleDateString(),
            column: 'todo'
        };

        createCard(taskData);
        saveTask(taskData);
        input.value = "";
    }

    function createCard(data) {
        const card = document.createElement('div');
        card.className = 'task-card';
        card.id = data.id;
        card.draggable = true;
        card.ondragstart = drag;

        card.innerHTML = `
            <button class="delete-btn" onclick="deleteTask('${data.id}')">&times;</button>
            <strong>${data.name}</strong>
            <div class="task-date">Created: ${data.date}</div>
            <div class="completed-msg" style="display: ${data.column === 'completed' ? 'block' : 'none'}">Task Completed Successfully</div>
        `;

        document.getElementById(data.column).appendChild(card);
    }

    function allowDrop(ev) {
        ev.preventDefault();
        ev.currentTarget.classList.add('drag-over');
    }

    function clearStyles(ev) {
        ev.currentTarget.classList.remove('drag-over');
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        const column = ev.currentTarget;
        column.classList.remove('drag-over');
        
        const taskId = ev.dataTransfer.getData("text");
        const taskCard = document.getElementById(taskId);
        column.appendChild(taskCard);

        // Update card visual based on column
        const msg = taskCard.querySelector('.completed-msg');
        msg.style.display = (column.id === 'completed') ? "block" : "none";

        updateTaskStatus(taskId, column.id);
    }

    function deleteTask(id) {
        document.getElementById(id).remove();
        let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];
        tasks = tasks.filter(t => t.id !== id);
        localStorage.setItem('myTasks', JSON.stringify(tasks));
    }

    function saveTask(task) {
        let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];
        tasks.push(task);
        localStorage.setItem('myTasks', JSON.stringify(tasks));
    }

    function updateTaskStatus(id, newCol) {
        let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];
        tasks = tasks.map(t => t.id === id ? { ...t, column: newCol } : t);
        localStorage.setItem('myTasks', JSON.stringify(tasks));
    }

    function loadTasks() {
        let tasks = JSON.parse(localStorage.getItem('myTasks')) || [];
        tasks.forEach(t => createCard(t));
    }
</script>

</body>
</html>